div.full-size.script-output-pane(ng-controller="ScriptOutputController")
	.toolbar.toolbar-tall
		span(ng-show="!status.running && !status.stopping")
			a.btn.btn-info(
				href,
				ng-disabled="currentRun.running",
				ng-click="runSelection()"
			)
				i.fa.fa-fw(
					ng-class="{'fa-refresh fa-spin': currentRun.running, 'fa-play': !currentRun.running }"
				)
				| &nbsp; Run Line
		span(ng-show="status.running && !status.stopping")
			a.btn.btn-info(disabled=true)
				i.fa.fa-fw.fa-refresh.fa-spin
				| &nbsp; Running
			a(
				href,
				ng-click="stop()"
			).small
				.i.fa.fa-fw.fa-stop
				|  Stop
		a(href, ng-click="restart()", tooltip-html-unsafe="Restart<br/>Session", tooltip-placement="bottom").pull-right
			i.fa.fa-fw.fa-refresh
			

	include ../link-image

	div.script-output.main-script-output(scroll-glue)
		.script-output-inner
			.script-uncompiled(ng-show="!cells[engine] && !status.running")
				| &nbsp;
				i.fa.fa-level-up.fa-flip-horizontal.fa-2x
				| &nbsp;&nbsp;Click here to run your script...
			.script-uncompiled.script-uncompiled-bottom(ng-show="!cells[engine] && !status.running")
				| &nbsp;
				i.fa.fa-level-down.fa-flip-horizontal.fa-2x
				| &nbsp;&nbsp;Or run a command directly!
			
			div.cell(ng-repeat="cell in cells[engine]")
				div.input(ng-if="!cell.shutdown")
					.execution-count
						| In[{{cell.execution_count}}]:
					.cell-content
						.chunk(ng-repeat="input in cell.input")
							pre {{ input.content.code }}
				div.output(ng-if="!cell.shutdown")
					.execution-count
						| Out[{{cell.execution_count}}]:
					pre.cell-content
						span.chunk(ng-repeat="output in cell.output")
							span(ng-if="output.header.msg_type == 'stream'", ng-bind-html="output.content.text_escaped")
							span(ng-if="output.header.msg_type == 'execute_result'")
								span(ng-if="output.content.data['text/plain' ]") {{ output.content.data['text/plain'] }}
							span(ng-if="output.header.msg_type == 'display_data'")
								img(ng-if="output.content.data['image/png']", ng-src="data:image/png;base64,{{output.content.data['image/png']}}")
								span(ng-if="output.content.data['text/html_escaped']", ng-bind-html="output.content.data['text/html_escaped']")
							div(ng-if="output.header.msg_type == 'error'").alert.alert-danger
								div {{ output.content.evalue }}
								div(ng-repeat="line in output.content.traceback_escaped", ng-bind-html="line")
				div.alert.alert-info.shutdown(ng-show="cell.shutdown")
					| Session restarted
				hr
			
			.alert.alert-info(ng-show="status.initing")
				p
					i.fa.fa-spinner.fa-spin.fa-fw 
					|  Initializing environment...
				p.small (This can take a while the first time you run something)
			
			.alert.alert-danger(ng-if="status.error")
				| Sorry, something went wrong running your request. Please try again.
			
			div.cell.manual-input.border-top
				div.input
					.execution-count
						| In[]:
					.cell-content
						textarea(ng-model="manualInput", on-enter="runManualInput()", placeholder = "Command...")
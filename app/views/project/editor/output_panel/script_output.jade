div.full-size.script-output-pane(ng-controller="ScriptOutputController")
	.toolbar.toolbar-tall
		span(ng-show="!status.running && !status.stopping")
			a.btn.btn-info(
				href,
				ng-click="runSelection()"
			)
				i.fa.fa-fw.fa-play
				| &nbsp; 
				span(ng-show="editor.selection.lines.length == 1") Run Line
				span(ng-show="editor.selection.lines.length > 1") Run Selection
		span(ng-show="!status.running && !status.stopping")
			a.btn.btn-default(
				href,
				ng-click="runAll()"
			)
				| Run Script
		span(ng-show="status.running && !status.stopping")
			a.btn.btn-info(disabled=true)
				i.fa.fa-fw.fa-refresh.fa-spin
				| &nbsp; Running
			a(
				href,
				ng-click="stop()"
			).small
				.i.fa.fa-fw.fa-stop
				|  Stop
		a(href, ng-click="restart()", tooltip-html="'Restart<br/>Session'", tooltip-placement="bottom").pull-right
			i.fa.fa-fw.fa-refresh
			

	include ../link-image

	div.jupyter-output.main-script-output(scroll-glue)
		.jupyter-output-inner
			.jupyter-uncompiled(ng-show="!cells[engine] && !status.running")
				| &nbsp;
				i.fa.fa-level-up.fa-flip-horizontal.fa-2x
				| &nbsp;&nbsp;Click here to run your script...
			.jupyter-uncompiled.jupyter-uncompiled-bottom(ng-show="!cells[engine] && !status.running")
				| &nbsp;
				i.fa.fa-level-down.fa-flip-horizontal.fa-2x
				| &nbsp;&nbsp;Or run a command directly!
			
			div.cell(ng-repeat="cell in cells[engine]")
				div.input(ng-if="!cell.shutdown")
					.execution-count
						| In[{{cell.execution_count}}]:
					.cell-content
						.chunk(ng-repeat="input in cell.input")
							span.text-input.text-monospace {{ input.content.code }}
				div.output(ng-if="!cell.shutdown")
					.execution-count
						| Out[{{cell.execution_count}}]:
					.cell-content
						.chunk(ng-repeat="output in cell.output")
							span.text-output.text-monospace(ng-if="output.header.msg_type == 'stream'", ng-bind-html="output.content.text_escaped")
							span(ng-if="output.header.msg_type == 'execute_result'")
								span.text-output.text-monospace(ng-if="output.content.data['text/plain' ]") {{ output.content.data['text/plain'] }}
							div(ng-if="output.header.msg_type == 'display_data' && output.content.image")
								img.image(ng-if="output.content.format == 'image/png'", ng-src="data:image/png;base64,{{output.content.data['image/png']}}", download="output.png")
								img.image(ng-if="output.content.format == 'image/jpeg'", ng-src="data:image/jpeg;base64,{{output.content.data['image/jpeg']}}", download="output.jpeg")
								span.image(ng-if="output.content.format == 'image/svg+xml'", ng-bind-html="output.content.data['image/svg+xml']")
								iframe.image(ng-if="output.content.format == 'application/pdf'", ng-src="{{output.content.data['application/pdf+url']}}", download="output.pdf")
								.download-controls
									div(dropdown, dropdown-append-to-body).format-dropdown
										a(href, dropdown-toggle, tooltip="Format")
											i.fa.fa-fw.fa-file-image-o
											i.fa.fa-caret-down
										ul.dropdown-menu(role="menu")
											li(ng-repeat="format in output.content.available_formats")
												a(href, ng-click="showFormat(output, format)") {{ format }}
										a(
											ng-if="output.content.format != 'image/svg+xml'",
											ng-href="{{output.content.data[output.content.format + '+url']}}",
											download="output",
											tooltip="Download"
										)
											i.fa.fa-fw.fa-download
							div(ng-if="output.header.msg_type == 'display_data' && !output.content.image")
								div(ng-if="output.content.show_format == 'text/html_escaped'", ng-bind-html="output.content.data['text/html_escaped']")
							div(ng-if="output.header.msg_type == 'error'").alert.alert-danger.text-monospace
								div {{ output.content.evalue }}
								div(ng-repeat="line in output.content.traceback_escaped", ng-bind-html="line")
				div.alert.alert-info.shutdown(ng-show="cell.shutdown")
					| Session restarted
				hr
			
			.alert.alert-info(ng-show="status.initing")
				p
					i.fa.fa-spinner.fa-spin.fa-fw 
					|  Initializing environment...
				p.small (This can take a while the first time you run something)
			
			.alert.alert-danger(ng-if="status.error")
				| Sorry, something went wrong running your request. Please try again.
			
			div.cell.manual-input.border-top
				div.input
					.execution-count
						| In[]:
					.cell-content
						textarea(ng-model="manualInput", on-enter="runManualInput()", placeholder = "Command...")